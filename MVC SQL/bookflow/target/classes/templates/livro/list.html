<!-- templates/livro/list.html -->
<!DOCTYPE html>
<html lang="pt" xmlns:th="http://www.thymeleaf.org"
      th:replace="layout :: layout(~{::title}, ~{::section})">
<head>
    <title>Livros - BookFlow</title>
</head>
<body>
    <section>
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1><i class="bi bi-book"></i> Livros</h1>
            <div>
                <a th:href="@{/livros/disponiveis}" class="btn btn-info me-2">
                    <i class="bi bi-check-circle"></i> Disponíveis
                </a>
                <a th:href="@{/livros/novo}" class="btn btn-primary">
                    <i class="bi bi-plus-circle"></i> Novo Livro
                </a>
            </div>
        </div>

        <div th:if="${livros.isEmpty()}" class="alert alert-info">
            Nenhum livro cadastrado.
        </div>

        <table th:unless="${livros.isEmpty()}" class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Título</th>
                    <th>Autor</th>
                    <th>Ano</th>
                    <th>ISBN</th>
                    <th>Exemplares</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="livro : ${livros}">
                    <td th:text="${livro.id}"></td>
                    <td th:text="${livro.titulo}"></td>
                    <td th:text="${livro.autor?.nome}"></td>
                    <td th:text="${livro.anoPublicacao}"></td>
                    <td th:text="${livro.isbn}"></td>
                    <td>
                        <span th:class="${livro.quantidadeExemplares > 0} ? 'badge bg-success' : 'badge bg-danger'">
                            <span th:text="${livro.quantidadeExemplares}"></span> un.
                        </span>
                    </td>
                    <td>
                        <a th:href="@{/livros/editar/{id}(id=${livro.id})}" 
                           class="btn btn-sm btn-warning">
                            <i class="bi bi-pencil"></i>
                        </a>
                        <a th:href="@{/livros/excluir/{id}(id=${livro.id})}" 
                           class="btn btn-sm btn-danger"
                           onclick="return confirm('Tem certeza que deseja excluir este livro?')">
                            <i class="bi bi-trash"></i>
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
    </section>
</body>
</html>